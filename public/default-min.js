var API=API||{};!function(e){"use strict";API.socket=io.connect("http://10.255.0.100:8080"),API.ready=function(){API.socket.emit("client-ready","client-ready"),e(".ui.dropdown").dropdown(),e("#device").on("change",":input[name=devicename]",function(){var t=e(this).closest("#devicerecord"),i=e(this).val();t.find("[data-id=devicephysicalintfput]").attr("data-device-name",i)}),e("#fpmccredentials").on("submit",function(t){t.preventDefault();var i={};e(":input").each(function(){i[this.name]=e(this).val()}),API.socket.emit("fpmc-register",i),e(".ui.loader").toggleClass("active")}),e("#fpmcProfile").on("submit",function(t){t.preventDefault();var i={};e(":input").each(function(){i[this.name]=e(this).val()}),API.socket.emit("fpmc-profile",i),e(".ui.loader").toggleClass("active")}),e("#accesspoliciespost").on("submit",function(t){t.preventDefault();var i={};e(":input").each(function(){i[this.name]=e(this).val()}),API.socket.emit("acpolicy-post",i),e(".ui.loader").toggleClass("active")}),e("#acPolicyGet").on("submit",function(t){t.preventDefault();var i={};e(":input").each(function(){i[this.name]=e(this).val()}),API.socket.emit("acpolicy-getID",i),e(".ui.loader").toggleClass("active")}),e("#devicerecordpost").on("submit",function(t){t.preventDefault();var i=e(":input"),n=e("input:checked"),c={},o=["BASE"];i.each(function(){c[this.name]=e(this).val()}),n.each(function(){o.push(e(this).val())}),c.lic=o,API.socket.emit("device-post",c),e(".ui.loader").toggleClass("active")}),e("#submit").on("click",function(t){t.preventDefault();var i=[];e(".ui.form").map(function(t,n){var c=e(this),o=c.attr("id"),a=c.find("input[type=text]"),s={};if(s[o]={},a.each(function(){s[o][this.name]=e(this).val()}),c.find("input:checked").length){var u=c.find("input:checked"),l=[];u.each(function(){l.push(this.value)}),s[o][u[0].name]=l}if(c.find("option:selected").length){var r=c.find("option:selected");s[o].devicename=c.attr("data-device-name"),r.each(function(){s[o][e(this).attr("name")]=e(this).val()})}i.push(s)}),console.log(i),API.socket.emit("new-automation",i)}),e("#newdevice").on("click",function(t){t.preventDefault(),e("#devicerecord").clone().appendTo("#device")}),e("#removedevice").on("click",function(t){t.preventDefault(),e("#device").children("#devicerecord").last().remove()})},API.socket.on("register-success",function(t){e(".ui.loader").toggleClass("active"),e("p").text("Registration successful: "+t.authToken+" "+t.authRefreshToken+" "+t.domain_uuid)}),API.socket.on("profile-result",function(t){e(".ui.loader").toggleClass("active"),e("p").text("FPMC profile result: "+JSON.stringify(t))}),API.socket.on("acpolicypost-result",function(t){e(".ui.loader").toggleClass("active"),e("p").text("ACPolicy post result: "+JSON.stringify(t))}),API.socket.on("devicepost-result",function(t){e(".ui.loader").toggleClass("active"),e("p").text("Device post result: "+JSON.stringify(t))}),e(function(){API.ready()})}(jQuery);