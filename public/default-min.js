var API=API||{};!function(e){"use strict";API.socket=io.connect("http://10.255.0.100:8080"),API.ready=function(){API.socket.emit("client-ready","client-ready"),e(".ui.dropdown").dropdown(),e("#fpmcCredentials").on("submit",function(t){t.preventDefault();var i={};e(":input").each(function(){i[this.name]=e(this).val()}),API.socket.emit("fpmc-register",i),e(".ui.loader").toggleClass("active")}),e("#fpmcProfile").on("submit",function(t){t.preventDefault();var i={};e(":input").each(function(){i[this.name]=e(this).val()}),API.socket.emit("fpmc-profile",i),e(".ui.loader").toggleClass("active")}),e("#acPolicyPost").on("submit",function(t){t.preventDefault();var i={};e(":input").each(function(){i[this.name]=e(this).val()}),API.socket.emit("acpolicy-post",i),e(".ui.loader").toggleClass("active")}),e("#acPolicyGet").on("submit",function(t){t.preventDefault();var i={};e(":input").each(function(){i[this.name]=e(this).val()}),API.socket.emit("acpolicy-getID",i),e(".ui.loader").toggleClass("active")}),e("#devicerecordpost").on("submit",function(t){t.preventDefault();var i=e(":input"),n=e("input:checked"),o={},c=["BASE"];i.each(function(){o[this.name]=e(this).val()}),n.each(function(){c.push(e(this).val())}),o.lic=c,API.socket.emit("device-post",o),e(".ui.loader").toggleClass("active")}),e("#submit").on("click",function(t){t.preventDefault();var i=[];e(".ui.form").map(function(t,n){var o=e(this),c=o.attr("id"),a=o.find("input[type=text]"),s={};if(s[c]={},a.each(function(){s[c][this.name]=e(this).val()}),u=o.find("input:checked").length){var u=o.find("input:checked"),l=[];u.each(function(){l.push(this.value)}),s[c][u[0].name]=l}i.push(s)}),console.log(i),API.socket.emit("new-automation",i)}),e("#newdevice").on("click",function(t){t.preventDefault(),e("#devicerecordpost").clone().appendTo("#device")}),e("#removedevice").on("click",function(t){t.preventDefault(),e("#device").children("form").last().remove()})},API.socket.on("register-success",function(t){e(".ui.loader").toggleClass("active"),e("p").text("Registration successful: "+t.authToken+" "+t.authRefreshToken+" "+t.domain_uuid)}),API.socket.on("profile-result",function(t){e(".ui.loader").toggleClass("active"),e("p").text("FPMC profile result: "+JSON.stringify(t))}),API.socket.on("acpolicypost-result",function(t){e(".ui.loader").toggleClass("active"),e("p").text("ACPolicy post result: "+JSON.stringify(t))}),API.socket.on("devicepost-result",function(t){e(".ui.loader").toggleClass("active"),e("p").text("Device post result: "+JSON.stringify(t))}),e(function(){API.ready()})}(jQuery);